<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Air Quality Invisible Cities</title>
    <!-- Required meta tags -->
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

    <!--  Bootstrap, General Styling and Icons     -->
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css">
    <link rel="stylesheet" href="assets/css/index.css"/>

    <!-- Material Kit CSS -->
    <script src="assets/libs/core/bootstrap-material-design.min.js"></script>
    <link href="assets/css/material-kit.css?v=2.0.5" rel="stylesheet" />
    <!-- Leaflet -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.4.0/dist/leaflet.css" integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA==" crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.4.0/dist/leaflet.js" integrity="sha512-QVftwZFqvtRNi0ZyCtsznlKSWOStnDORoefr1enyq5mVL4tmKB3S/EnC3rRJcxCPavG10IcrVGSmPh6Qw5lwrg==" crossorigin=""></script>

    <!-- JQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>

    <!--FULLPAGE-->
    <script src="assets/libs/lethargy.min.js"></script>
    <script src="https://rawgit.com/Olical/EventEmitter/master/EventEmitter.min.js"></script>
    <script src="assets/libs/smartscroll.min.js"></script>

    <!-- Leaflet plugins & stuff -->
    <script src="assets/libs/leaflet-svg-shape-markers.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet-easybutton@2/src/easy-button.css">
    <script src="https://cdn.jsdelivr.net/npm/leaflet-easybutton@2/src/easy-button.js"></script>

    <!-- Own Scripts-->
    <script src="assets/js/leaflet_functions.js"></script>
    <script src="assets/js/map.js"></script>

    <!-- Data -->
    <script src="assets/js/countries.js"></script>

    <!-- Story -->
    <script src="assets/js/stories.js"></script>


</head>
<div class="header">
    <nav class="navbar navbar-color-on-scroll navbar-transparent fixed-top navbar-expand-lg" style="padding-top: 5px;" color-on-scroll="100">
            <div class="collapse navbar-collapse">
                <ul id="menu" >
                    <li data-menuanchor="page1" class="active"><a href="#page1" title="Top"><img src="assets/img/homepage.png"></a></li>
                    <li data-menuanchor="page2" class="active"><a href="#page2" title="History"><img src="assets/img/airpol.png"></a></li>
                    <li data-menuanchor="page3" class="active"><a href="#page3" title="Globe Map"><img src="assets/img/big_globe_icon.png"></a></li>
                    <li data-menuanchor="page4" class="active"><a href="#page4" title="2D Map"><img src="assets/img/world-map.png"></a></li>
                    <li data-menuanchor="page5" class="active"><a href="#page5" title="Region Map"><img src="assets/img/icon_region.png"></a></li>
                    <li data-menuanchor="page6" class="active"><a href="#page6" title="Street Map"><img src="assets/img/street_icon.png"></a></li>
                    <li onclick="on(); $(this).toggleClass('');" class="active"><a href="#about" title="about"><img src="assets/img/info-button.png"></a></li>
                </ul>
            </div>
    </nav>
</div>

<div class="section-wrapper">
    <div id="page1" class="section"style="padding: 0px 0" data-hash="a">
            <div class="page-header header-filter" data-parallax="true" style="background-image: url('assets/img/homepage_cover.jpg')">
                <div class="container">
                    <div class="row">
                        <div class="col-md-8 ml-auto mr-auto">
                            <div id="page1_innertext" class="brand text-center">
                                <h1>Invisible Cities</h1>
                                <h3 class="title text-center">World Air Quality</h3>
                                <button type="button" onclick="getHomePageStory(); index=0;" class="btn btn-outline-info">Begin</button>
                            </div>
                            <div id="introPage" class="brand text-center" style="display:none">
                                <div id="introText1" class="brand text-center" style="display: none;"></div>
                                <div id="introText2" class="brand text-center" style="display: none;"></div>
                                <div id="backButtonBar" class="btn-bar" style="display: none;">
                                    <button type="button" onclick="getHomePage();" class="btn btn-outline-info btn-sm">Home Page</button>
                                    <button type="button" onclick="moveForward();" class="btn btn-outline-info btn-sm" id="forwardButtonBar">Introduction</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
        </div>
    </div>

    <div id="page2" style="height: 100vh; padding: 0px 0;" class="section" data-hash="b">
                <iframe id="history" src="history/history.html" style="background: rgba(0,0,0,0.84);" height="100%" width="100%;" frameBorder="0" scrolling="no"></iframe>
    </div>


    <div id="page3" style="height: 100vh; padding: 0px 0;" class="section" data-hash="c">
        <iframe id="globe" src="globe/globe.html" style="background: rgba(0,0,0,0.84);" height="100%" width="100%" frameBorder="0" scrolling="no"></iframe>
    </div>


    <script src="https://d3js.org/d3.v4.min.js"></script>

    <div id="page4" class="section" style="height: 100vh; padding: 0px 0;" data-hash="d">
        <div id="map" style="height: 100vh;  margin-top: 0;"></div>
        <script>
            // script for initialising th map
            // set max bounds
            var bounds = L.latLngBounds(L.latLng(-90.0, 180.227), L.latLng(90.0, -180.125));
            var mymap = L.map('map', {maxBounds:bounds, keyboard: false}).setView([20, 24], 2);

            mymap.options.minZoom = 2;
            mymap.options.maxZoom = 10;
            mymap.doubleClickZoom.disable(); // disable double click zoom (as double click is used to rebound the map to a country in updateMap.js)


            L.tileLayer('https://api.mapbox.com/styles/v1/mapbox/dark-v9/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoidWN6bHFqdSIsImEiOiJjam4zOXRjMHUwY3htM3BteXgxazVxZ3QzIn0.mmRn_HjpXDzMJrKj1apGNQ', {
                maxZoom: 18,
                attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>, Data Sources: <a href="https://waqi.info/">World Air Quality Index API</a>, <a href="https://data.worldbank.org/indicator/nv.ind.totl.zs">World Bank</a>',
                id: 'mapbox.dark'
            }).addTo(mymap);
        </script>

    </div>

    <div id="page5" class="section text-dark" style="height: 100vh; padding: 0px 0;" data-hash="e">
        <iframe id="region" src="region/region.html" height="100%" width="100%"  scrolling="no"></iframe>
    </div>


    <div id="page6" class="section" style="height: 100vh; padding: 0px 0;" data-hash="f">
        <iframe id="streetMap" src="street/street.html" height="100%" width="100%" frameBorder="0" scrolling="no"></iframe>
    </div>
</div>

<!-- ABOUT -->
<div class="section" id="about" style="display: none" onclick="off()" data-hash="about">
    <div id="aboutText" class="text-dark">
        <h3>London Invisible Cities</h3>
        <br/>

        <p>
            <br/>Creators : Thomas Keel, Qiuwen Ju, Zixin Lyu, Jay Wilson
            <br/>Map engine : <a href="https://www.mapbox.com/" target="_blank">Mapbox GL JS</a>
                                <a href="https://www.leafletjs.com/" target="_blank">Leaflet JS</a>
                <br/>Github : <a href="https://github.com/CASA-DV-Group3/AirQuality-0" target="_blank">@CASA-DV-Group3</a>
            <br/>
            <br/>@ 2019 CASA, University College London</p>
            <div>Icons made by <a href="https://www.freepik.com/" title="Freepik">Freepik</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a> is licensed by <a href="http://creativecommons.org/licenses/by/3.0/" title="Creative Commons BY 3.0" target="_blank">CC 3.0 BY</a></div>
            <h3>References</h3>
            <div id="references" style="text-align: left">
                <b>Globe Vizualisation</b> <a> Global Burden of Disease Collaborative Network. Global Burden of Disease Study 2016 (GBD 2016) Reference Life Table. Seattle, United States: Institute for Health Metrics and Evaluation (IHME), 2017.</a> <a>Global Burden of Disease Collaborative Network. Global Burden of Disease Study 2017 (2017) Results. Seattle, United States: Institute for Health Metrics and Evaluation (IHME), 2018.</a><br>
                WHO (2019) BreatheLife: air pollution is an invisible killer [Online]. Available at: https://www.who.int/sustainable-development/news-events/breath-life/about/en/[Accessed 23rd May 2019].
                <b>World Map</b>– References:<br>
                World Bank (2017) Industry (including construction), value added (% of GDP). [Data]. Available at: https://data.worldbank.org/indicator/nv.ind.totl.zs [Accessed 18th May 2019].
                <b>Regional Animation</b>– References<br>
                <b>Street Level</b>– References<br>
            </div>
    </div>
</div>

<!-- ABOUT/CLICK EVENTS -->
<script src="assets/js/buttons.js"></script>

<script>
    window.addEventListener('DOMContentLoaded', (event) => {
        var ee = new EventEmitter();
        $.smartscroll({
            mode: "vp",
            eventEmitter: ee,
            // initialScroll: true,
            animationSpeed: 300,
            keepHistory: false,
            sectionScroll: true
        });

        loadAirQualityData(quantileView); // load air quality quantile
        addMapControls()

    });

</script>

</body>
</html>



